<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
<head>
    <title>SonicHollow Forum</title>
    <link href="../static/css/bootstrap.min.css" >
    <link rel="shortcut icon" href="../static/images/favicon.ico" type="image/x-icon"/>
    <link href="../static/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../static/css/detail.css"/>
    <script src="../static/js/jquery-3.5.1.min.js"></script>
    <script src="../static/js/bootstrap.js"></script>
</head>

<div th:include="common/commonNavbar" style="position:fixed;left: 0;top:0; width:100%; z-index: 500"> </div>
    <body>
        <div class="header" style="z-index: 1">
            <div class="info">
                <br>
                <div class="meta">
                    <h1>
                        <img th:src="${avatar}" class="author" alt="Default"/>
                    </h1>
                </div>
            </div>
        </div>

        <a class="abutton" onclick="window.location.href='postList'" style="z-index: 1; float:left; margin-left: 50px; margin-top: -240px; position: relative">GO BACK</a>

        <h1 style="position: relative; margin-top: 60px; margin-left: 290px">
            By <a style="text-decoration: none;" th:href="@{/userInfo/{name}(name=${post.getUsername()})}" target="_b" th:text="${post.getUsername()}"></a> on
            <a th:text="${post_time}" style="color: white"></a>
            <a style="font-size: 14pt; margin-left: 100px" th:text="${post.getViewCount()}"></a>
            <a style="font-size: 14pt">Views</a>
            <a style="font-size: 14pt; margin-left: 30px" th:text="${likes}"></a>
            <a style="font-size: 14pt">Likes</a>
        </h1>

        <form style="float:right; margin-top: -90px; margin-right: 90px" th:action="'/likepost/'+${post.getPid()}+'/'+${view_user.getUid()}" method="post">
            <button class="heart">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                    <path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"></path>
                </svg>
            </button>
        </form>

        <section class="content">
            <p th:text="${post.getText()}"></p>
        </section>

        <div class="comments-container">
            <h1>Comments
            </h1>

            <h1 style="margin-top:100px; font-size: 24px">Add a comment below</h1>

            <div class="container" style="margin-bottom: 200px">
                <form>
                    <div class="form-group">
                        <textarea class="form-control status-box" rows="3" placeholder="Enter your comment here..."></textarea>
                    </div>
                </form>
                <div class="button-group pull-right">
                    <p style="font-size: 16px" class="counter">250</p>
                    <a onclick="window.alert('In Sprint 4-5, the front-end of the comment function has been finished. Due to personal reasons of the back-end developer, the back-end has not been finished. We still keep the corresponding front-end code (commented in this html file), you may uncomment this part manually to see the front-end-only comment function. Thank you. ')" class="btn btn-primary">Post</a>
                </div>
                <ul class="posts">
                </ul>
            </div>

<!--            <ul id="comments-list" class="comments-list">-->
<!--                <li>-->
<!--                    <div class="comment-main-level">-->
<!--                        <div class="comment-avatar"><img src="http://i9.photobucket.com/albums/a88/creaticode/avatar_1_zps8e1c80cd.jpg" alt=""></div>-->
<!--                        <div class="comment-box">-->
<!--                            <div class="comment-head">-->
<!--                                <h6 class="comment-name by-author"><a href="http://creaticode.com/blog">Agustin Ortiz</a></h6>-->
<!--                                <span>hace 20 minutos</span>-->
<!--                                <i class="fa fa-reply"></i>-->
<!--                                <i class="fa fa-heart"></i>-->
<!--                            </div>-->
<!--                            <div class="comment-content">-->
<!--                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Velit omnis animi et iure laudantium vitae, praesentium optio, sapiente distinctio illo?-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </li>-->

<!--                <li>-->
<!--                    <div class="comment-main-level">-->
<!--                        <div class="comment-avatar"><img src="http://i9.photobucket.com/albums/a88/creaticode/avatar_2_zps7de12f8b.jpg" alt=""></div>-->
<!--                        <div class="comment-box">-->
<!--                            <div class="comment-head">-->
<!--                                <h6 class="comment-name"><a href="http://creaticode.com/blog">Lorena Rojero</a></h6>-->
<!--                                <span>hace 10 minutos</span>-->
<!--                                <i class="fa fa-reply"></i>-->
<!--                                <i class="fa fa-heart"></i>-->
<!--                            </div>-->
<!--                            <div class="comment-content">-->
<!--                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Velit omnis animi et iure laudantium vitae, praesentium optio, sapiente distinctio illo?-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </li>-->
<!--            </ul>-->
<!--            <svg style="margin-left: 280px; margin-top: 100px" t="1650459318154" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="628" width="200" height="200"><path d="M780.8 977.066667c41.813333 0 75.093333-33.28 75.093333-75.093334V122.026667c0-41.813333 33.28-75.093333 75.093334-75.093334h-699.733334c-41.813333 0-75.093333 33.28-75.093333 75.093334v855.893333h624.64z" fill="#FFFFFF" p-id="629"></path><path d="M931.84 46.933333c-41.813333 0-75.093333 33.28-75.093333 75.093334v104.106666H1006.933333V122.026667c0-41.813333-34.133333-75.093333-75.093333-75.093334zM794.453333 976.213333H93.866667c-41.813333 0-75.093333-33.28-75.093334-75.093333v-46.08h700.586667v46.08c0 41.813333 34.133333 75.093333 75.093333 75.093333zM724.48 164.693333c0 13.653333-11.093333 25.6-25.6 25.6H313.173333c-14.506667 0-25.6-11.946667-25.6-25.6s11.093333-25.6 25.6-25.6h385.706667c13.653333 0 25.6 11.093333 25.6 25.6zM740.693333 735.573333c0 11.946667-9.386667 21.333333-21.333333 21.333334h-426.666667c-11.946667 0-21.333333-9.386667-21.333333-21.333334s9.386667-21.333333 21.333333-21.333333h426.666667c11.946667 0 21.333333 9.386667 21.333333 21.333333z" fill="#C7CAC7" p-id="630"></path><path d="M279.893333 296.96h452.266667v196.266667h-452.266667z" fill="#EFCF48" p-id="631"></path><path d="M931.84 38.4H231.253333c-46.08 0-83.626667 37.546667-83.626666 83.626667v725.333333h-128c-5.12 0-8.533333 3.413333-8.533334 8.533333v46.08c0 46.08 37.546667 83.626667 83.626667 83.626667h58.026667c0.853333 0.853333 2.56 0.853333 3.413333 0.853333h625.493333c3.413333 0 7.68 0 11.093334-0.853333h2.56c1.706667 0 2.56-0.853333 4.266666-0.853333 37.546667-7.68 65.706667-41.813333 65.706667-81.92V233.813333H1006.933333c5.12 0 8.533333-3.413333 8.533334-8.533333V122.026667c0-46.08-37.546667-83.626667-83.626667-83.626667zM164.693333 967.68h-69.973333c-36.693333 0-66.56-29.866667-66.56-66.56v-37.546667h683.52v37.546667c0 27.306667 12.8 51.2 33.28 66.56h-580.266667z m683.52-65.706667c0 33.28-23.893333 60.586667-56.32 65.706667-34.986667-1.706667-64-30.72-64-66.56v-46.08c0-5.12-3.413333-8.533333-8.533333-8.533333h-554.666667v-725.333334c0-36.693333 29.866667-66.56 66.56-66.56h650.24l-0.853333 0.853334c-1.706667 0.853333-2.56 2.56-4.266667 3.413333-0.853333 0.853333-1.706667 1.706667-2.56 1.706667l-5.12 5.12c0 0.853333-0.853333 0.853333-0.853333 1.706666-1.706667 2.56-3.413333 4.266667-5.12 6.826667-0.853333 0.853333-0.853333 1.706667-1.706667 2.56-0.853333 1.706667-2.56 3.413333-3.413333 5.12-0.853333 0.853333-0.853333 1.706667-1.706667 2.56l-2.56 5.12c-0.853333 0.853333-0.853333 2.56-0.853333 3.413333-0.853333 1.706667-0.853333 3.413333-1.706667 5.12 0 0.853333-0.853333 2.56-0.853333 3.413334-0.853333 1.706667-0.853333 4.266667-0.853333 5.973333 0 0.853333 0 1.706667-0.853334 2.56 0 3.413333-0.853333 5.973333-0.853333 9.386667v782.506666zM998.4 216.746667h-133.12V122.026667c0-36.693333 29.866667-66.56 66.56-66.56s66.56 29.866667 66.56 66.56v94.72z" p-id="632"></path><path d="M582.826667 173.226667h17.066666c5.12 0 8.533333-3.413333 8.533334-8.533334s-3.413333-8.533333-8.533334-8.533333h-17.066666c-5.12 0-8.533333 3.413333-8.533334 8.533333s4.266667 8.533333 8.533334 8.533334zM497.493333 173.226667h17.066667c5.12 0 8.533333-3.413333 8.533333-8.533334s-3.413333-8.533333-8.533333-8.533333h-17.066667c-5.12 0-8.533333 3.413333-8.533333 8.533333s4.266667 8.533333 8.533333 8.533334zM352.426667 164.693333c0-5.12-3.413333-8.533333-8.533334-8.533333h-17.066666c-5.12 0-8.533333 3.413333-8.533334 8.533333s3.413333 8.533333 8.533334 8.533334h17.066666c5.12 0 8.533333-4.266667 8.533334-8.533334zM685.226667 156.16h-17.066667c-5.12 0-8.533333 3.413333-8.533333 8.533333s3.413333 8.533333 8.533333 8.533334h17.066667c5.12 0 8.533333-3.413333 8.533333-8.533334s-3.413333-8.533333-8.533333-8.533333zM412.16 173.226667h17.066667c5.12 0 8.533333-3.413333 8.533333-8.533334s-3.413333-8.533333-8.533333-8.533333h-17.066667c-5.12 0-8.533333 3.413333-8.533333 8.533333s4.266667 8.533333 8.533333 8.533334zM740.693333 295.253333v-1.706666c0-0.853333-0.853333-0.853333-0.853333-1.706667s-0.853333-0.853333-0.853333-1.706667-0.853333-0.853333-1.706667-0.853333l-0.853333-0.853333h-0.853334c-0.853333 0-0.853333 0-1.706666-0.853334h-1.706667-453.12c-5.12 0-8.533333 3.413333-8.533333 8.533334V494.933333c0 0.853333 0.853333 0.853333 0.853333 1.706667s0.853333 0.853333 0.853333 1.706667 0.853333 0.853333 1.706667 0.853333l0.853333 0.853333h1.706667c0.853333 0 1.706667 0.853333 2.56 0.853334h48.64v225.28h-40.96c-5.12 0-8.533333 3.413333-8.533333 8.533333s3.413333 8.533333 8.533333 8.533333h98.133333c5.12 0 8.533333-3.413333 8.533334-8.533333s-3.413333-8.533333-8.533334-8.533333h-40.96V622.933333H665.6v104.106667h-40.96c-5.12 0-8.533333 3.413333-8.533333 8.533333s3.413333 8.533333 8.533333 8.533334h98.133333c5.12 0 8.533333-3.413333 8.533334-8.533334s-3.413333-8.533333-8.533334-8.533333h-40.96V501.76h48.64c5.12 0 8.533333-3.413333 8.533334-8.533333v-196.266667c1.706667-0.853333 1.706667-0.853333 1.706666-1.706667zM520.533333 484.693333l103.253334-179.2H716.8l-102.4 179.2H520.533333z m-112.64 0l103.253334-179.2h93.013333l-103.253333 179.2H407.893333z m-113.493333 0l103.253333-179.2h93.013334l-103.253334 179.2H294.4z m83.626667-179.2L288.426667 460.8V305.493333h89.6zM667.306667 605.866667H344.746667V501.76h321.706666V605.866667z m-33.28-121.173334l89.6-156.16v156.16H634.026667z" p-id="633"></path></svg>-->
<!--            <h1 style="margin-top: 50px; margin-bottom: 100px">Under Construction...</h1>-->
        </div>

        <footer th:replace="common/footer_long.html" style="position:relative;left: 0;bottom:0; height: 100px; width: 100%"></footer>
    </body>
</html>

<script th:inline="javascript">
    var main = function() {
        $('.btn').click(function() {
            var post = $('.status-box').val();
            $('<li>').text(post).prependTo('.posts');
            $('.status-box').val('');
            $('.counter').text('250');
            $('.btn').addClass('disabled');
        });
        $('.status-box').keyup(function() {
            var postLength = $(this).val().length;
            var charactersLeft = 250 - postLength;
            $('.counter').text(charactersLeft);
            if (charactersLeft < 0) {
                $('.btn').addClass('disabled');
            } else if (charactersLeft === 250) {
                $('.btn').addClass('disabled');
            } else {
                $('.btn').removeClass('disabled');
            }
        });
    }
    $('.btn').addClass('disabled');
    $(document).ready(main)

    // let isActive = false;

    let isActive = /*[[${liked}]]*/ false;

    if(document.body.animate) {
        document.querySelector('.heart').addEventListener('click', onClick);
    }

    function onClick(event) {
        const target = event.target;
        if (!isActive) {
            target.classList.add('active');
        } else {
            target.classList.remove('active');
        }

        isActive = !isActive;
    }
</script>

<style>

    .heart {
        position: relative;
        cursor: pointer;
        width: 140px;
        height: 140px;
        border-radius: 50%;
        border: none;
        background-color: rgba(255, 20, 57, 0);
        outline: none;
    }

    .heart svg {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: -1;
        width: 40px;
        height: 40px;
        fill: #669999;
        transition: 400ms;
    }
    .heart.active svg {
        fill: #ff6b81;
        animation-name: Bounce;
        animation-duration: 500ms;
        animation-iteration-count: 1;
    }


    .container {
        width: 520px;
        margin-top: 20px;
    }
    .button-group {
        margin-top: 20px;
        margin-bottom: 20px;
    }
    .counter {
        display: inline;
        margin-top: 0;
        margin-bottom: 0;
        margin-right: 10px;
    }
    .posts {
        clear: both;
        list-style: none;
        padding-left: 0;
        width: 100%;
        text-align: left;
        margin-top: 50px;
    }
    .posts li {
        background-color: #fff;
        border: 1.5px solid #d8d8d8;
        border-radius: 20px;
        padding-top: 10px;
        padding-left: 20px;
        padding-right: 20px;
        padding-bottom: 10px;
        margin-bottom: 10px;
        word-wrap: break-word;
        min-height: 42px;
        box-shadow:8px 8px 5px #888888;
    }
    .btn-primary {
        float: right;
        color: #fff;
        background-color: #337ab7;
        border-color: #2e6da4;
        border-radius: 10px;
    }

</style>